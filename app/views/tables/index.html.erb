<nav class="navbar navbar-dark bg-dark" style='height: 80px;'>
  <div class='headingpouch'>
    <a class="navbar-brand" href="#">Pouch Mate</a>
  </div>
</nav> 

<!--카루셀 화장대-->
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="10000">
  <div class="carousel-inner">
    <div class="carousel-item active">
        <div class='firstpage'>
          <div class='top'>
            <div class='item left'>
              <div class='floor one'>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
              </div>
              <div class='floor two'>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
              </div>
            </div>
            <div class='item middle'>
                    <div class='aaa'>
                      <% if user_signed_in? %>
                        <a href='/friends/index'><img src='/like.png'></a>
                      <% end %>
                    </div>
                    <div class="profile"'>
                      <% if User.find(@user_id).profile_img.url %>
                        <img src="<%= @user.profile_img.thumb.url %>" class='profileimage'>
                      <% end %>
                    </div><br>
                    <div class="profile_info">
                        <h1><%= @user.nickname %></h1>
                    </div>
                    <br>
                    <div class='wrapwrap'>
                      <div class='friendsandlifetem'>
                        <% if user_signed_in? %>
                          <a href='/friends/index'><img src='/friends_icon.png'></a>
                        <% end %>                        
                      </div>
                      <div id="myBtn"><img src='/plus.png'></div>
                    </div>
            </div>
            <div class='item right'>
              <div class='floor three'>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
              </div>
              <div class='floor four'>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>                
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>    
                <div class="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>             
              </div>
            </div>
          </div>
          <div class='bottom'>
            <div class='floor five'>
                <% @posts.each_with_index do |p,index| %>
                  <div class="box boxdrag <%=index%>" ondrop="drop(event)" ondragover="allowDrop(event)"><a href='/posts/<%=p.id%>'><img src=<%=p.carrierimage.thumb%> draggable="true" ondragstart="drag(event)" id='drag <%=index%>' class="imagedrag"></a>
                  </div>
                <%end%>              
            </div>
          </div>
        </div>
    </div>
    <div class="carousel-item rightside">
        <div class='firstpage'>
          <div class='top'>
            <div class='pageright'>
              <div class='topright floorside'></div>
              <div class='middleright floorside'></div>
            </div>
          </div>
          <div class='bottom'>
            <div class='bottomright floorside'></div>
          </div>
        </div>      
    </div>
    <div class="carousel-item leftside">
        <div class='firstpage'>
          <div class='top'>
            <div class='pageright'>
              <div class='topleft floorside'>
                <% @posts.each_with_index do |p,index| %>
                  <div class="box boxdrag <%=index%>" id='myBtn2'>
                    <img src=<%=p.carrierimage.thumb%> id='drag <%=index%>'>
                  </div>

                  <div id="myModal2" class="modal2 <%=index%>">
                    <div class="modal-content2">
                        <%=p.title%>
                        <%=p.carrierimage.thumb%>
                    </div>                        
                  </div>

                <%end%>     
              </div>
              <div class='topleft floorside'></div>
            </div>
          </div>
          <div class='bottom'>
            <div class='bottomleft floorside'></div>
          </div>
        </div>      
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev" style="width: 5%;opacity: 0.01;">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next" style="width: 5%;opacity: 0.01;">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<!-- 모달 -->
<div id="myBtn1">등록하기</div>

<div id="myModal1" class="modal1">
<!-- Modal content -->
  <div class="modal-content1">
    <div class="ctn-form">
    <%= render 'form', post: @post %>
    </div>
  </div>                        
</div>




<div class='footer'>
  <div class="comment_div">
      <div class="titleBox">
        <label>파우치 리뷰</label>
      </div>

      <div class="actionBox">
          <ul class="commentList">
          <% User.find(params[:user_id]).table_comments.all.each do |comment| %>
              <li>
                  <div class="commenterImage">
                    <img src='<%= comment.user.profile_img.thumb4 %>' class='commentprofileimage'> 
                  </div>
                  <div class="commentText">
                    <div class='a'>
                      <p class='who'><%= comment.user.nickname %></p>
                      <p> <%= comment.content %></p>                      
                    </div>
                      <span class="date sub-text">on March 5th, 2018</span>
                  </div>
              </li>
          <% end %>
          </ul>
          <%= form_for TableComment.new, html: {class: "form-inline"}, url: tables_comments_create_path(user_id: params[:user_id]) do |f| %>
              <div class="form-group-com">
                  <img src='<%=@user.profile_img.thumb3 %>' class='mycommentprofileimage'>
                  <%= f.text_field :content, class: 'form-control', placeholder: '댓글달기'%>
              </div>
              <div class="form-group">
                  <%=f.submit "작성", class: 'btn btn-default'%>
              </div>
          <% end %>
      </div>
  </div>
  <div class='friends_div'>
      <div class="titleBox">
        <label>친구 추천</label>
      </div>

      <div class="actionBox">
          <ul class="commentList">
          <% User.find(params[:user_id]).table_comments.all.each do |comment| %>
              <li>
                  <div class="commenterImage">
                    <img src='<%= comment.user.profile_img.thumb4 %>' class='commentprofileimage'> 
                  </div>
                  <div class="commentText">
                    <div class='a'>
                      <p class='who'><%= comment.user.nickname %></p>
                      <p> <%= comment.content %></p>                      
                    </div>
                      <span class="date sub-text">on March 5th, 2018</span>
                  </div>
              </li>
          <% end %>
          </ul>
          <%= form_for TableComment.new, html: {class: "form-inline"}, url: tables_comments_create_path(user_id: params[:user_id]) do |f| %>
              <div class="form-group-com">
                  <img src='<%=@user.profile_img.thumb3 %>' class='mycommentprofileimage'>
                  <%= f.text_field :content, class: 'form-control', placeholder: '댓글달기'%>
              </div>
              <div class="form-group">
                  <%=f.submit "작성", class: 'btn btn-default'%>
              </div>
          <% end %>
      </div>      
  </div>
</div>


<div class='daeun'>
  <%= form_tag("/posts/search", method: "get") do %>
    <%= text_field_tag(:search,params[:search], data: {behavior:"autocomplete"}) %>
    <%= submit_tag "검색", :name => nil %>
  <% end %>
</div>

<%= link_to 'New Post', new_post_path %>

<script type='text/javascript'>
  // Get the modal
  var modal1 = document.getElementById('myModal1');
          
  // Get the button that opens the modal
  var btn1 = document.getElementById("myBtn1");
          
  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];
          
  // When the user clicks the button, open the modal 
  btn1.onclick = function() {
    modal1.style.display = "block";
  }
          
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal1.style.display = "none";
  }
          
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal1) {
        modal1.style.display = "none";
      }
  }
</script>

<script type='text/javascript'>
  var modal2 = document.getElementById('myModal2');
  var btn2 = document.getElementById("myBtn2");
  var span = document.getElementsByClassName("close")[0];
  btn2.onclick = function() {
    modal2.style.display = "block";
  }
  span.onclick = function() {
    modal2.style.display = "none";
  }   
  window.onclick = function(event) {
    if (event.target == modal2) {
        modal2.style.display = "none";
      }
  }
</script>

<script type='text/javascript'>
  (function(){
          $(document).ready(function(){
          // 가장 마지막 항목의 index를 가져온다.
          //(책이 3권이면 3의 값이 $book_list_num)에 저장된다.
          $cosmetic_list_num = $("div").data("listNum");

          for(i=1; i<= parseInt($cosmetic_list_num); i++){
              var modal[i] = document.getElementById('myModal[i]');
              var btn[i] = document.getElementById("myBtn[i]");
              var span = document.getElementsByClassName("close")[0];
              btn[i].onclick = function() {
                modal[i].style.display = "block";
              }
              span.onclick = function() {
                modal[i].style.display = "none";
              }   
              window.onclick = function(event) {
                if (event.target == modal[i]) {
                    modal[i].style.display = "none";
                  }
              }
          }
      });

  })();
</script>
